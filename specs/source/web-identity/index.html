<!DOCTYPE html> 
<html> 
  <head> 
    <title>Web Identity 1.0</title> 
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/> 
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     --> 
    <script src='../../respec-w3c-common.js' class='remove'></script> 
    <script type="text/javascript" class="remove">
    var preProc = {
          apply:  function(c) {
                    // extend the bibliography entries
                    berjon.biblio["HTML-RDFA"] = "Manu Sporny; et al. <a href=\"http://www.w3.org/TR/rdfa-in-html/\"><cite>HTML+RDFa</cite></a> 04 March 2010. W3C Working Draft. URL: <a href=\"http://www.w3.org/TR/rdfa-in-html/\">http://www.w3.org/TR/rdfa-in-html/</a>";
                    berjon.biblio["JSON-LD"] = "Manu Sporny; Gregg Kellogg; Dave Longley; et al. <a href=\"http://json-ld.org/spec/latest/\"><cite>JSON-LD</cite></a> latest. W3C Community Group Working Draft. URL: <a href=\"http://json-ld.org/spec/latest/\">http://json-ld.org/spec/latest/</a>";
                    berjon.biblio["HTTP-SIGNATURES"] = "Mark Cavage; Manu Sporny <a href=\"http://tools.ietf.org/html/draft-cavage-http-signatures\"><cite>HTTP Signatures</cite></a> latest. IETF Network Working Group Internet Draft. URL: <a href=\"http://tools.ietf.org/html/draft-cavage-http-signatures\">http://tools.ietf.org/html/draft-cavage-http-signatures</a>";
                    berjon.biblio["REST"] = "Fielding, Roy Thomas. <a href=\"http://www.ics.uci.edu/~fielding/pubs/dissertation/\"><cite>Architectural Styles and the Design of Network-based Software Architectures</cite></a> 2000. University of California, Irvine. URL: <a href=\"http://www.ics.uci.edu/~fielding/pubs/dissertation/\">http://www.ics.uci.edu/~fielding/pubs/dissertation/</a>";
                    berjon.biblio["FIPS-197"] = "Information Technology Laboratory. <a href=\"http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf\"><cite>Specification for the ADVANCED ENCRYPTION STANDARD (AES)</cite></a> November 26th, 2001. Department of Commerce, National Institute of Standards and Technology. URL: <a href=\"http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf\">http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf</a>";


                    // process the document before anything else is done
                    var refs = document.querySelectorAll('adef') ;
                    for (var i = 0; i < refs.length; i++) {
                        var item = refs[i];
                        var p = item.parentNode ;
                        var con = item.innerHTML ;
                        var sp = document.createElement( 'dfn' ) ;
                        var tit = item.getAttribute('title') ;
                        if (!tit) {
                            tit = con;
                        }
                        sp.className = 'adef' ;
                        sp.title=tit ;
                        sp.innerHTML = con ;
                        p.replaceChild(sp, item) ;
                    }
                    refs = document.querySelectorAll('aref') ;
                    for (var i = 0; i < refs.length; i++) {
                        var item = refs[i];
                        var p = item.parentNode ;
                        var con = item.innerHTML ;
                        var sp = document.createElement( 'a' ) ;
                        sp.className = 'aref' ;
                        sp.setAttribute('title', con);
                        sp.innerHTML = '@'+con ;
                        p.replaceChild(sp, item) ;
                    }
                    // local datatype references
                    refs = document.querySelectorAll('ldtref') ;
                    for (var i = 0; i < refs.length; i++) {
                        var item = refs[i];
                        if (!item) continue ;
                        var p = item.parentNode ;
                        var con = item.innerHTML ;
                        var ref = item.getAttribute('title') ;
                        if (!ref) {
                            ref = item.textContent ;
                        }
                        if (ref) {
                            ref = ref.replace(/\n/g, '_') ;
                            ref = ref.replace(/\s+/g, '_') ;
                        }
                        var sp = document.createElement( 'a' ) ;
                        sp.className = 'datatype';
                        sp.title = ref ;
                        sp.innerHTML = con ;
                        p.replaceChild(sp, item) ;
                    }
                    // external datatype references
                    refs = document.querySelectorAll('dtref') ;
                    for (var i = 0; i < refs.length; i++) {
                        var item = refs[i];
                        if (!item) continue ;
                        var p = item.parentNode ;
                        var con = item.innerHTML ;
                        var ref = item.getAttribute('title') ;
                        if (!ref) {
                            ref = item.textContent ;
                        }
                        if (ref) {
                            ref = ref.replace(/\n/g, '_') ;
                            ref = ref.replace(/\s+/g, '_') ;
                        }
                        var sp = document.createElement( 'a' ) ;
                        sp.className = 'externalDFN';
                        sp.title = ref ;
                        sp.innerHTML = con ;
                        p.replaceChild(sp, item) ;
                    }
                    // now do terms
                    refs = document.querySelectorAll('tdef') ;
                    for (var i = 0; i < refs.length; i++) {
                        var item = refs[i];
                        if (!item) continue ;
                        var p = item.parentNode ;
                        var con = item.innerHTML ;
                        var ref = item.getAttribute('title') ;
                        if (!ref) {
                            ref = item.textContent ;
                        }
                        if (ref) {
                            ref = ref.replace(/\n/g, '_') ;
                            ref = ref.replace(/\s+/g, '_') ;
                        }
                        var sp = document.createElement( 'dfn' ) ;
                        sp.title = ref ;
                        sp.innerHTML = con ;
                        p.replaceChild(sp, item) ;
                    }
                    // now term references
                    refs = document.querySelectorAll('tref') ;
                    for (var i = 0; i < refs.length; i++) {
                        var item = refs[i];
                        if (!item) continue ;
                        var p = item.parentNode ;
                        var con = item.innerHTML ;
                        var ref = item.getAttribute('title') ;
                        if (!ref) {
                            ref = item.textContent ;
                        }
                        if (ref) {
                            ref = ref.replace(/\n/g, '_') ;
                            ref = ref.replace(/\s+/g, '_') ;
                        }

                        var sp = document.createElement( 'a' ) ;
                        var id = item.textContent ;
                        sp.className = 'tref' ;
                        sp.title = ref ;
                        sp.innerHTML = con ;
                        p.replaceChild(sp, item) ;
                    }
                }
        } ;

      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "CG-DRAFT",
          
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "web-identity",
 
          // if you wish the publication date to be other than today, set this
          // publishDate:  "2009-08-06",
 
          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
          // previousPublishDate:  "1977-03-15",
          // previousMaturity:  "WD",
 
          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "http://payswarm.com/specs/source/web-identity/",
 
          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",
 
          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          extraCSS:             ["spec.css", "prettify.css"],
 
          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Manu Sporny", url: "http://digitalbazaar.com/",
                company: "Digital Bazaar, Inc.", companyURL: "http://digitalbazaar.com/" },
          ],
 
          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.
 
          //authors:  [
          //    { name: "Your Name", url: "http://example.org/",
          //      company: "Your Company", companyURL: "http://example.com/" },
          //],
          
          // name of the WG
          wg:           "W3C Web Payments Community Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/community/webpayments/",
          
          // name (with the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "public-webpayments@w3.org",

          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "",
          maxTocLevel: 4,
          preProcess: [ preProc ] /*,
          alternateFormats: [ {uri: "diff-20111214.html", label: "diff to previous version"} ],
          */
      };
    </script> 
    <script type="text/javascript" src="prettify.js" class="remove"></script>
    <script type="text/javascript" src="lang-jsonld.js" class="remove"></script>
    <script type="text/javascript" class="remove">
      var oldonload = window.onload;
      window.onload = function() {
        if (oldonload) oldonload();
        prettyPrint();
      };
    </script>
  </head> 
  <body> 
    <section id='abstract'> 
      <p>
An <em>identity</em> is a Linked Data description of a particular entity 
such as a person or organization. This specification describes a mechanism of 
reading and writing to an online Linked Data identity. Linked Data identities
are useful for storing arbitrary information, such as a person's shipping
address, verified citizenship information, or age. The data is only accessible 
by authorized applications.
      </p>
    </section>

    <section>
      <h2>Introduction</h2>
      <p class="issue">
Explain what a Linked Data identity does, what it's useful for, and
why reading and writing to the identity must be secured using a mechanism 
that is equivalent to role-based access control.
      </p>
    </section>

    <section>
      <h2>The Identity</h2>
      <p>
An entity may have one or more identities associated with it. These can be
anonymous identities, pseudo-anonymous identities, protected identities, 
and public identities. The creation of these identities is out of scope
for this document, but typically result in the creation of a long-lived
identity URL. For example, <code>https://example.com/identities/john</code> is
an example of a long-lived identity URL.
      </p>

      <section>
        <h2>A Basic Identity</h2>
        <p>
A basic identity contains at least the type information for the identity.
        <dl>
        <dt><code>@context</code></dt>
        <dd>The value <code>https://w3id.org/identity/v1</code>, or an equivalent
JSON-LD Context expressing the terminology necessary for the expression of the
data.</dd>
        <dt><code>@type</code></dt>
        <dd>The value <code>Identity</code>.</dd>
        </p>
      </section>

      <section>
        <h2>A Typical Identity</h2>
        <p>
A typical identity will have a mix of public and private data associated with
it. For example:
        </p>
        
<pre class="example">{
  "@context": "https://w3id.org/identity/v1",
  "@id": "https://example.com/identities/bob",
  "@type": "Identity",
  "name": "Bob Bobman",
  "shippingAddress": {
    "street": "372 Sumter Lane",
    "city": "Blackrock",
    "postalCode": "237842"
  },
  "email": "bbob@example.com",
  "mobileNumber": "4424672637162",
  "citizenship": {
     "country": "USA",
     "citizenshipId": "223-93-2422",
     "birthdate": "1985-12-14",
     "name": "BOBULA K. BOBMAN",
     "signature": {
       "@type": "GraphSignature2013",
       "signer": "https://ssa.us.gov/keys/27",
       "signature": "3780eyfh3q0fhhfiq3q9f8ahsidfhf29rhaish"
     }
  }

}</pre>
        
      </section>

      <section>
        <h2>Writing Data to the Identity</h2>
        <p>
JSON-LD data in the body of the request is written to the identity by 
performing an HTTP POST call with a query
parameter called <code>action</code> appended to the identity URL with a value
matching one of the possibilities below:
        </p>
        <dl>
          <dt><code>append</code></dt>
          <dd>Appends data specified in the POST body to the identity. If
          data does not already exist, it is created.</dd>
          <dt><code>delete</code></dt>
          <dd>Deletes data specified in the POST body from the identity.</dd>
          <dt><code>replace</code></dt>
          <dd>Replaces data specified in the POST body in the identity. If
          the data does not already exist, it is created.</dd>
        </dl>
        <p class="issue">
Should the POST request must be digitally signed using the HTTP Signatures 
mechanism, or should we require a browser-redirect? We should probably support
both?
        </p>
      </section>

      <section>
        <h2>Reading Data from the Identity</h2>
        <p>
Reading data from an identity is performed via an HTTP POST call with a query
parameter called <code>action</code> appended to the identity URL with a value
matching <code>read</code>.
        </p>
     </section>
    </section>
  </body> 
</html>

